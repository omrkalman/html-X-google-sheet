<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Entry by codeSith</title>
    <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
        rel="stylesheet" 
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
        crossorigin="anonymous" 
    />
    <style>
        form {
            font-size: 40px !important;
            width: min(800px, 90%);
        }
    </style>
</head>
<body>
    <form
        id = "form"
        class = "mx-auto my-5 shadow p-2"
        method = "POST"
    >
    <!-- action= will be set by javascript -->
        <div class="mb-1 d-flex">
            <label class="mx-3" for="customer">Customer:</label>
            <input
                type="text"
                class="mx-3 form-control"
                id="customer"
                name="Customer"
                list="customers"
            />
            <datalist id="customers">
                <!-- javascript will add options here -->
            </datalist>
        </div>
        <div class="mb-1 d-flex">
            <label class="mx-3" for="phone">Phone:</label>
            <input
                type="text"
                class="mx-3 form-control"
                id="phone"
                name="Phone"
                list="phones"
            />
            <datalist id="phones">
                <!-- javascript will add options here -->
            </datalist>
        </div>
        <div class="mb-1 d-flex">
            <label class="mx-3" for="address">Address:</label>
            <input
                type="text"
                class="mx-3 form-control"
                id="address"
                name="Address"
                list="addresses"
            />
            <datalist id="addresses">
                <!-- javascript will add options here -->                
            </datalist>
        </div>
        <div class="mb-1 d-flex">
            <label class="mx-3" for="price">Price:</label>
            <input
                type="text"
                class="mx-3 form-control"
                id="price"
                name="Price"
            />
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <script>
        const url = "" // enter your public ('access' - 'anyone') deployment URL (NOT test deployment!)
        document.getElementById('form').action = url;

        // fetching the data from each column in the sheet
        // then populating the respective datalist
        fetch(`${url}?header=Customer`)
            .then((response) => response.json())
            .then(({ data }) => {
                console.log(data);
                populateDatalists("customers", data)
            })
            .catch((error) => console.error('!!!!!!!!', error));

        fetch(`${url}?header=Phone`)
            .then((response) => response.json())
            .then(({ data }) => {
                console.log(data);
                populateDatalists("phones", data)
            })
            .catch((error) => console.error('!!!!!!!!', error));
        
        fetch(`${url}?header=Address`)
            .then((response) => response.json())
            .then(({ data }) => {
                console.log(data);
                populateDatalists("addresses", data)
            })
            .catch((error) => console.error('!!!!!!!!', error));

        // function to add options to datalists
        const populateDatalists = (id, arr) => {
            let result = '';
            for (const item of arr) {
                result += `<option value="${item}">`;
            }
            document.getElementById(id).innerHTML = result;
        }
    </script>
</body>
</html>